---
title: "[프로그래머스] Lv.2 이모티콘 할인행사 (C++)"
date: 2024-02-23 23:51:00 +09:00
categories: [Algorithm, 프로그래머스]
tags: [Algorithm, 프로그래머스, C++, Lv.2]
---
## **문제**
[[2023 KAKAO BLIND RECRUITMENT] 이모티콘 할인행사](https://school.programmers.co.kr/learn/courses/30/lessons/150368)

카카오톡에서는 이모티콘을 무제한으로 사용할 수 있는 이모티콘 플러스 서비스 가입자 수를 늘리려고 합니다.
이를 위해 카카오톡에서는 이모티콘 할인 행사를 하는데, 목표는 다음과 같습니다.

1. 이모티콘 플러스 서비스 가입자를 최대한 늘리는 것.
2. 이모티콘 판매액을 최대한 늘리는 것.

**<u>1번 목표가 우선이며, 2번 목표가 그 다음입니다.</u>**

이모티콘 할인 행사는 다음과 같은 방식으로 진행됩니다.

- `n`명의 카카오톡 사용자들에게 이모티콘 `m`개를 할인하여 판매합니다.
- 이모티콘마다 할인율은 다를 수 있으며, 할인율은 10%, 20%, 30%, 40% 중 하나로 설정됩니다.

카카오톡 사용자들은 다음과 같은 기준을 따라 이모티콘을 사거나, 이모티콘 플러스 서비스에 가입합니다.

- 각 사용자들은 자신의 기준에 따라 일정 비율 이상 할인하는 이모티콘을 모두 구매합니다.
- 각 사용자들은 자신의 기준에 따라 이모티콘 구매 비용의 합이 일정 가격 이상이 된다면, 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.

다음은 2명의 카카오톡 사용자와 2개의 이모티콘이 있을때의 예시입니다.

|사용자|비율|가격|
|:---|:---|:---|
|1|40|10,000|
|2|25|10,000|

|이모티콘|가격|
|:---|:---|
|1|7,000|
|2|9,000|

1번 사용자는 40%이상 할인하는 이모티콘을 모두 구매하고, 이모티콘 구매 비용이 10,000원 이상이 되면 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.
2번 사용자는 25%이상 할인하는 이모티콘을 모두 구매하고, 이모티콘 구매 비용이 10,000원 이상이 되면 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입합니다.

1번 이모티콘의 가격은 7,000원, 2번 이모티콘의 가격은 9,000원입니다.

만약, 2개의 이모티콘을 모두 40%씩 할인한다면, 1번 사용자와 2번 사용자 모두 1,2번 이모티콘을 구매하게 되고, 결과는 다음과 같습니다.

|사용자|구매한 이모티콘|이모티콘 구매 비용|이모티콘 플러스 서비스 가입 여부|
|:---|:---|:---|:---|
|1|1, 2|9,600|X|
|2|1, 2|9,600|X|

이모티콘 플러스 서비스 가입자는 0명이 늘어나고 이모티콘 판매액은 19,200원이 늘어납니다.

하지만, 1번 이모티콘을 30% 할인하고 2번 이모티콘을 40% 할인한다면 결과는 다음과 같습니다.

|사용자|구매한 이모티콘|이모티콘 구매 비용|이모티콘 플러스 서비스 가입 여부|
|:---|:---|:---|:---|
|1|2|5,400|X|
|2|1, 2|10,300|O|

2번 사용자는 이모티콘 구매 비용을 10,000원 이상 사용하여 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입하게 됩니다.
따라서, 이모티콘 플러스 서비스 가입자는 1명이 늘어나고 이모티콘 판매액은 5,400원이 늘어나게 됩니다.

카카오톡 사용자 `n`명의 구매 기준을 담은 2차원 정수 배열 `users`, 이모티콘 `m`개의 정가를 담은 1차원 정수 배열 `emoticons`가 주어집니다. 이때, 행사 목적을 최대한으로 달성했을 때의 이모티콘 플러스 서비스 가입 수와 이모티콘 매출액을 1차원 정수 배열에 담아 return 하도록 solution 함수를 완성해주세요.
<br>

## **제한사항**
- 1 ≤ `users`의 길이 = `n` ≤ 100
    - `users`의 원소는 [`비율`, `가격`]의 형태입니다.
    - `users[i]`는 `i+1`번 고객의 구매 기준을 의미합니다.
    - `비율`% 이상의 할인이 있는 이모티콘을 모두 구매한다는 의미입니다.
        - 1 ≤ `비율` ≤ 40
    - `가격`이상의 돈을 이모티콘 구매에 사용한다면, 이모티콘 구매를 모두 취소하고 이모티콘 플러스 서비스에 가입한다는 의미입니다.
        - 100 ≤ `가격` ≤ 1,000,000
        - `가격`은 100의 배수입니다.
- 1 ≤ `emoticons`의 길이 = `m` ≤ 7
    - `emoticons[i]`는 `i+1`번 이모티콘의 정가를 의미합니다.
    - 100 ≤ `emoticons`의 원소 ≤ 1,000,000
    - `emoticons`의 원소는 100의 배수입니다.
<br>

## **체감 난이도**
🟩🟩⬜⬜⬜
<br>

## **풀이**
사용자의 수 `n`이 최대 100이고, 이모티콘의 개수 `m`이 최대 7이라는 조건을 믿고 완전탐색을 돌렸다.

1. 할인율은 10%, 20%, 30%, 40% 중 하나이므로, **4개 중 m개를 선택하는 중복순열을 구현**해 `ratio` 배열에 담는다.
2. 모든 `ratio` 배열을 순회하면서 `users` 배열에 담긴 조건 {구매할 최소 할인 비율, 이모티콘 플러스에 가입할 최소 금액}과 비교하면서 **이모티콘 플러스에 가입할 고객이면 `res[0]`을 하나 늘려주고, 아니라면 총 구매 가격을 `res[1]`에 더해준다.**
3. 모든 유저를 순회했으면 `res` 배열을 `answer` 배열에 담아준다.
4. `ratio` 배열의 순회가 끝났으면 `answer` 배열을 내림차순 정렬한다.
5. 정렬된 배열은 문제에서 주어진 조건에 따라, **각 이모티콘에 정해진 할인율을 적용했을 때 이모티콘 플러스 가입자가 많은 것 순서대로 정렬되고, 이모티콘 플러스 가입자가 같다면 사용한 가격이 많은 순서대로 정렬**된다.
6. 맨 앞에 오는 배열이 정답이다.
<br>

## **정답 코드**
```c++
#include <string>
#include <vector>
#include <algorithm>

using namespace std;

// idea: 완전탐색? n 100개 m 7개니까 가능하겠다.
// 4의 7승 = 16384 번 연산
// ...?

// 4개의 원소 중 길이가 m인 중복순열을 모두 담는 배열
vector<vector<int>> ratio;

// 중복순열 구현
void perm_repetition(vector<int> v, vector<int> perm, int depth)
{
    if (depth == perm.size())
    {        
        ratio.push_back(perm);
        return;
    }
    
    for (int i = 0; i < v.size(); i++)
    {
        perm[depth] = v[i];
        perm_repetition(v, perm, depth+1);
    }
}

vector<int> solution(vector<vector<int>> users, vector<int> emoticons) {
    vector<vector<int>> answer;
    
    int m = emoticons.size();
    // 각 이모티콘이 할인율을 100에서 빼 준 수를 담는다.
    vector<int> v = {60, 70, 80, 90};
    vector<int> perm(m);
    
    perm_repetition(v, perm, 0);
    
    for (int i = 0; i < ratio.size(); i++)
    {
        // 각 ratio[i]에 담긴 비율과 emoticons[i]에 담긴 가격에서, 인덱스가 같은 것들을 서로 곱하면 실제로 판매될 가격을 구할 수 있다.
        // 이것과 모든 유저를 비교하여 조건에 맞는 것들을 분류하여 res 배열에 추가한다.
        vector<int> res(2, 0);
        for (vector<int> user : users)
        {
            // 해당 유저가 구매할 이모티콘의 총 비용
            int sum = 0;
            for (int j = 0; j < m; j++)
            {
                // 구매할 최소 할인 비율보다 낮은 할인 비율이면 확인할 필요 없다.
                if (user[0] > 100 - ratio[i][j])
                    continue;
                
                sum += (ratio[i][j] * emoticons[j] / 100);
            }
            
            // 비용이 넘어선 경우에는 이모티콘 플러스에 가입한다.
            if (sum >= user[1])
                res[0]++;
            else
                res[1] += sum;
        }
        
        answer.push_back(res);
    }
    
    sort(answer.begin(), answer.end(), greater<>());
    
    return answer[0];
}
```